<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Gear C API Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-light+doxygen.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <span id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">
        <a href="/index.html">Gear</a> <span class="m-breadcrumb">|</span> <a href="index.html" class="m-thin">C API Documentation</a>
      </span>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-dox-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="examples.html">Examples</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="modules.html">Modules</a></li>
            <li><a href="files.html">Headers</a></li>
            <li class="m-show-m"><a href="#search" class="m-dox-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          Gear
        </h1>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              <a href="#autotoc_md4">Getting Started</a>
              <ul>
                <li><a href="#autotoc_md5">Installation</a></li>

              </ul>
            </li>
            <li>
              <a href="#autotoc_md6">Embedding Gear</a>
              <ul>
                <li><a href="#autotoc_md7">Configuration</a></li>
                <li><a href="#autotoc_md8">First Example</a></li>
                <li><a href="#autotoc_md9">Native Variables</a></li>

              </ul>
            </li>
            <li><a href="#autotoc_md10">Thead Safety</a></li>
          </ul>
        </div>
<p>This is the documentation for the <strong>Gear C API</strong>. To learn the language itself visit the <a href="http://www.gear-lang.org/">project homepage</a>.</p><p>In addition to C, the API can also be used from C++, Objective-C, and any language which can interface with a C ABI.</p><section id="autotoc_md4"><h2><a href="#autotoc_md4">Getting Started</a></h2><p>The C API is used for embedding Gear into a <strong>host application</strong> or creating a <strong>native module</strong>.</p><p>A <strong>host application</strong> is an executable which has support for Gear scripting.</p><p>A <strong>native module</strong> is a <a href="https://en.wikipedia.org/wiki/Library_(computing)#Shared_libraries">shared object</a> that can be imported by a Gear script. Shared objects are not portable and must be recompiled per-platform.</p><p>The process for embedding Gear into a host application or creating a native module is nearly identical.</p><section id="autotoc_md5"><h3><a href="#autotoc_md5">Installation</a></h3><p>First obtain Gear libraries for your application to link against. This can be done by either <a href="downloads.html">downloading prebuilt development libraries</a> for your platform or <a href="md_BUILDING.html">building Gear from source</a>.</p></section></section><section id="autotoc_md6"><h2><a href="#autotoc_md6">Embedding Gear</a></h2><p>Gear allows you to wrap native variables, functions, structs, and classes and expose them to Gear scripts. Conversely, Gear scripts can expose variables, functions, and objects for the native layer to access.</p><p>In order to learn the API, Gear provides a <a href="examples.html">comprehensive set of examples</a>. All examples are built when building Gear with CMake.</p><section id="autotoc_md7"><h3><a href="#autotoc_md7">Configuration</a></h3><p>Gear has been modularized so you only consume the components that you need.</p><p>Once you have obtained compiled Gear libraries then choose one of the following header/library configurations:</p><table class="m-table"><thead><tr><th>Header</th><th>Library (windows)</th><th>Library (*nix)</th><th>Description</th></tr></thead><tbody><tr><td><a class="m-dox" href="gear_8h.html">gear.h</a></td><td><code>gear.lib</code></td><td><code>libgear.a</code></td><td>Runtime <strong>and</strong> compiler API</td></tr><tr><td><a class="m-dox" href="gear__runtime_8h.html">gear_<wbr/>runtime.h</a></td><td><code>gearrt.lib</code></td><td><code>libgearrt.a</code></td><td>Runtime API only</td></tr><tr><td><a class="m-dox" href="gear__compiler_8h.html">gear_<wbr/>compiler.h</a></td><td><code>gearc.lib</code></td><td><code>libgearc.a</code></td><td>Compiler API only</td></tr></tbody></table><p>Each library listed above has a corresponding dynamic library which must be available to your application. Alternately, static libraries are available (they share the same names, but are suffixed with <code>_static</code>).</p></section><section id="autotoc_md8"><h3><a href="#autotoc_md8">First Example</a></h3><p>Lets try embedding Gear and printing "Hello World". Create a source file with the following code, then build and link with the <code>gear</code> library.</p><pre class="m-code"><span class="cp">#include</span> <span class="cpf">"gear/gear.h"</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n"><a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f">gear_state</a></span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="n"><a href="group__state__management.html#ga729addebc180aa7a27b5320a486c3582">gear_new</a></span><span class="p">();</span>
    <span class="n"><a href="gear_8h.html#aec6c4042c847dd26c6a5366c00991524">gear_eval</a></span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">"print('Hello, World!')"</span><span class="p">);</span>
    <span class="n"><a href="group__state__management.html#gaabe544d3fe58d489dbf47c13dd1389f6">gear_delete</a></span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></pre></section><section id="autotoc_md9"><h3><a href="#autotoc_md9">Native Variables</a></h3><p>The C API allows you to create <strong>native variables</strong> which can be used to reference Gear values. When a value is referenced by a native variable, it cannot be garbage collected.</p><p><strong>There are two kinds of native variables: locals and globals.</strong> They are both represented by the abstract handle <a class="m-dox" href="group__runtime.html#gafcd22ab21e85c32ce44c4960138a3224">gear_<wbr/>variable</a>.</p><p><strong>Local native variables</strong> are created using the <a class="m-dox" href="group__variable__api.html#gac8547b639bab9f8820fd8ae8ece89e7c">gear_<wbr/>init_<wbr/>local</a> function. They must be created between pairs of <a class="m-dox" href="group__variable__api.html#ga615095b6a4acb9198ea7d528ce692689">gear_<wbr/>push_<wbr/>local_<wbr/>scope</a> and <a class="m-dox" href="group__variable__api.html#gab0f97bff50484d15097864a53535c92f">gear_<wbr/>pop_<wbr/>local_<wbr/>scope</a> function calls. You should treat the area between these calls as a local scope. Never access local variables outside of local scope.</p><p><strong>Global native variables</strong> are created with <a class="m-dox" href="group__variable__api.html#ga5be78ec2e20fe196b94827e6b0ee9003">gear_<wbr/>init_<wbr/>global</a> and destroyed with <a class="m-dox" href="group__variable__api.html#gad0bf82117294dcd4df06d1d80b61c55f">gear_<wbr/>release_<wbr/>global</a>. They do not have a restriction on where they can be created or referenced.</p><p>There is a limit to how many local variables you can create, but no limit on the number of globals.</p></section></section><section id="autotoc_md10"><h2><a href="#autotoc_md10">Thead Safety</a></h2><p>An instance of Gear is managed through a <a class="m-dox" href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f">gear_<wbr/>state</a>. You can create as many states as you like, however, a state should only be used on the thread that created it.</p><p>Gear does <strong>not</strong> use a <a href="https://en.wikipedia.org/wiki/Global_interpreter_lock">global interpreter lock</a> meaning that multiple threads can run Gear in parallel.</p></section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-dox-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-dox-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-dox-search-content">
          <input type="search" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" />
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            Search for symbols, directories, files, pages or modules. You can omit any
            prefix from the symbol or file path; adding a <code>:</code> or <code>/</code>
            suffix lists all members of given symbol or directory. Navigate through the
            list using <span class="m-label m-dim">&darr;</span> and
            <span class="m-label m-dim">&uarr;</span>, press
            <span class="m-label m-dim">Enter</span> to go.
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search.js"></script>
<script src="searchdata.js" async="async"></script>
<!--
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Gear C API Documentation. Created by <a href="http://doxygen.org/">Doxygen</a> 1.8.14 and <a href="http://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
-->
</body>
</html>