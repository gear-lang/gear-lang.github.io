<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>State Management module | Gear C API Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-light+doxygen.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <span id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">
        <a href="/index.html">Gear</a> <span class="m-breadcrumb">|</span> <a href="index.html" class="m-thin">C API Documentation</a>
      </span>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-dox-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="examples.html">Examples</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="modules.html">Modules</a></li>
            <li><a href="files.html">Headers</a></li>
            <li class="m-show-m"><a href="#search" class="m-dox-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          State Management <span class="m-thin">module</span></h1>
        <p>API for managing a Gear instance.</p>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#nested-classes">Structs</a></li>
                <li><a href="#enum-members">Enums</a></li>
                <li><a href="#typedef-members">Typedefs</a></li>
                <li><a href="#func-members">Functions</a></li>
              </ul>
            </li>
          </ul>
        </div>
<p>A <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a> represents a single instance of Gear. It is neccessary for all API functions.</p><p>It can be initialized with support for the compiler, runtime, or both.</p>
        <section id="nested-classes">
          <h2><a href="#nested-classes">Structs</a></h2>
          <dl class="m-dox">
            <dt>
              struct <a href="structgear__host.html" class="m-dox">gear_host</a>
            </dt>
            <dd>Host application functions.</dd>
          </dl>
        </section>
        <section id="enum-members">
          <h2><a href="#enum-members">Enums</a></h2>
          <dl class="m-dox">
            <dt>
              <span class="m-dox-wrap-bumper">enum <a href="#ga4d8fe46958d2c537f0c9eae71897bc1d" class="m-dox">gear_code</a> { </span><span class="m-dox-wrap"><a href="#gga4d8fe46958d2c537f0c9eae71897bc1da4acfa97ef05b5809519d5ff9f36323c8" class="m-dox">GEAR_OK</a>,
              <a href="#gga4d8fe46958d2c537f0c9eae71897bc1da0f3170e82b4e5fa458cb5b4a47168a3b" class="m-dox">GEAR_INVALID_VALUE</a>,
              <a href="#gga4d8fe46958d2c537f0c9eae71897bc1dafe846dd35a08bf446233728dde6e0d0d" class="m-dox">GEAR_INVALID_OPERATION</a>,
              <a href="#gga4d8fe46958d2c537f0c9eae71897bc1da4fcc43a166e27bb6ec161eded042e36a" class="m-dox">GEAR_INVALID_STATE</a>,
              <a href="#gga4d8fe46958d2c537f0c9eae71897bc1dadbf18c0ae74bf3c0c312ab9165b356c5" class="m-dox">GEAR_STACK_OVERFLOW</a>,
              <a href="#gga4d8fe46958d2c537f0c9eae71897bc1da4da3d14affcddc99727a0f42ba44ae71" class="m-dox">GEAR_STACK_UNDERFLOW</a>,
              <a href="#gga4d8fe46958d2c537f0c9eae71897bc1dabbe46646b7c5ac3f6337c872c81aff5f" class="m-dox">GEAR_OUT_OF_MEMORY</a>,
              <a href="#gga4d8fe46958d2c537f0c9eae71897bc1da86a4772d5de0cd6a0b3a926e4aed08d3" class="m-dox">GEAR_OUT_OF_RANGE</a>,
              <a href="#gga4d8fe46958d2c537f0c9eae71897bc1da9ce9b4eb482dfeb1370e0753ab65ccdb" class="m-dox">GEAR_COMPILATION_ERROR</a>,
              <a href="#gga4d8fe46958d2c537f0c9eae71897bc1daf8a99a4ee6f78b2c85aa8c6c76fc0365" class="m-dox">GEAR_RUNTIME_ERROR</a> }</span>
            </dt>
            <dd>Function return codes.</dd>
          </dl>
        </section>
        <section id="typedef-members">
          <h2><a href="#typedef-members">Typedefs</a></h2>
          <dl class="m-dox">
            <dt>
              typedef struct <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a> <a href="#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_state</a> 
            </dt>
            <dd>The Gear state manages all data pertaining to interactions with the library.</dd>
            <dt>
              typedef void*(*)(void*user_ptr, void*ptr, unsigned int size) <a href="#gaaf5783e79c6a62fb7ba542e7b029f133" class="m-dox">gear_function_realloc</a> 
            </dt>
            <dd>This function should behave exactly like the C function <strong>realloc</strong>.</dd>
            <dt>
              typedef void(*)(void*user_ptr, void*ptr) <a href="#ga270407bb29be554bf454c9b1d7cb8ba8" class="m-dox">gear_function_free</a> 
            </dt>
            <dd>This function should behave exactly like the C function <strong>free</strong>.</dd>
            <dt>
              typedef void(*)(void*user_ptr, const char*str) <a href="#gad355f8189daf3acbefe8f260ab5dc881" class="m-dox">gear_function_print</a> 
            </dt>
            <dd>Print function callback.</dd>
            <dt>
              typedef void(*)(void*user_ptr, const char*function, const char*file, int line, const char*msg) <a href="#gae2b2ae34ee8a632ad0adb8370e0b7889" class="m-dox">gear_function_error</a> 
            </dt>
            <dd>Callback to be invoked when something goes wrong. A breakpoint can be placed inside the callback and then the trace examined. This can help aid in debugging.</dd>
          </dl>
        </section>
        <section id="func-members">
          <h2><a href="#func-members">Functions</a></h2>
          <dl class="m-dox">
            <dt>
              <span class="m-dox-wrap-bumper">  <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>* <a href="#ga729addebc180aa7a27b5320a486c3582" class="m-dox">gear_new</a>(</span><span class="m-dox-wrap">void)</span>
            </dt>
            <dd>Allocates a new <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">  <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>* <a href="#ga965a835ceb2f179a6f9199f2f7551848" class="m-dox">gear_new_runtime</a>(</span><span class="m-dox-wrap">void)</span>
            </dt>
            <dd>Allocates a new <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a> with only runtime capabilities.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">  <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>* <a href="#ga7138dba491951b53ec8324e866e42f1f" class="m-dox">gear_new_compiler</a>(</span><span class="m-dox-wrap">void)</span>
            </dt>
            <dd>Allocates a new <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a> with only compiler capabilities.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">  <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>* <a href="#ga096704d7bd507dd7664631a3fbb40d9b" class="m-dox">gear_new_ex</a>(</span><span class="m-dox-wrap">const <a href="structgear__host.html" class="m-dox">gear_<wbr />host</a>* host)</span>
            </dt>
            <dd>The extended form of the <a href="group__state__management.html#ga729addebc180aa7a27b5320a486c3582" class="m-dox">gear_<wbr />new</a> function.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">  void <a href="#gaabe544d3fe58d489dbf47c13dd1389f6" class="m-dox">gear_delete</a>(</span><span class="m-dox-wrap"><a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>* state)</span>
            </dt>
            <dd>Releases resources associated with a gear state.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">  <a href="group__state__management.html#ga4d8fe46958d2c537f0c9eae71897bc1d" class="m-dox">gear_<wbr />code</a> <a href="#gac6693516e7b33c0a6bc031cc607edb26" class="m-dox">gear_err</a>(</span><span class="m-dox-wrap"><a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>* state)</span>
            </dt>
            <dd>Returns the error code of the last function call.</dd>
            <dt>
              <span class="m-dox-wrap-bumper">  const char* <a href="#gadbc829d88f674fce8e7ebe097de49a04" class="m-dox">gear_errmsg</a>(</span><span class="m-dox-wrap"><a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>* state)</span>
            </dt>
            <dd>Returns a description of the last error from the last function call.</dd>
          </dl>
        </section>
        <section>
          <h2>Enum documentation</h2>
          <section class="m-dox-details" id="ga4d8fe46958d2c537f0c9eae71897bc1d"><div>
            <h3>
              enum <a href="#ga4d8fe46958d2c537f0c9eae71897bc1d" class="m-dox-self">gear_code</a>
            </h3>
            <p>Function return codes.</p>
<p>All Gear functions that make up the public C API will return a value from this enumeration.</p><aside class="m-note m-default m-see"><h4>See also</h4><p><a href="group__state__management.html#gac6693516e7b33c0a6bc031cc607edb26" class="m-dox">gear_<wbr />err</a></p><p><a href="group__state__management.html#gadbc829d88f674fce8e7ebe097de49a04" class="m-dox">gear_<wbr />errmsg</a></p></aside><aside class="m-note m-default"><h4>Since</h4><p>0.1.0</p></aside>
            <table class="m-table m-fullwidth m-flat m-dox">
              <thead><tr><th style="width: 1%">Enumerators</th><th></th></tr></thead>
              <tbody>
                <tr>
                  <td><a href="#gga4d8fe46958d2c537f0c9eae71897bc1da4acfa97ef05b5809519d5ff9f36323c8" class="m-dox-self" name="gga4d8fe46958d2c537f0c9eae71897bc1da4acfa97ef05b5809519d5ff9f36323c8">GEAR_OK</a></td>
                  <td>
                  <p>The function exited successfully.</p>
<aside class="m-note m-default"><h4>Since</h4><p>0.1.0</p></aside>
                  </td>
                </tr>
                <tr>
                  <td><a href="#gga4d8fe46958d2c537f0c9eae71897bc1da0f3170e82b4e5fa458cb5b4a47168a3b" class="m-dox-self" name="gga4d8fe46958d2c537f0c9eae71897bc1da0f3170e82b4e5fa458cb5b4a47168a3b">GEAR_INVALID_VALUE</a></td>
                  <td>
                  <p>An unexpected parameter was given to a function.</p>
<p>This occurs with incorrect parameter usage.</p><aside class="m-note m-default"><h4>Since</h4><p>0.1.0</p></aside>
                  </td>
                </tr>
                <tr>
                  <td><a href="#gga4d8fe46958d2c537f0c9eae71897bc1dafe846dd35a08bf446233728dde6e0d0d" class="m-dox-self" name="gga4d8fe46958d2c537f0c9eae71897bc1dafe846dd35a08bf446233728dde6e0d0d">GEAR_INVALID_OPERATION</a></td>
                  <td>
                  <p>The specified operation is not allowed in the current state.</p>
<p>The offending command is ignored and has no other side effect than to set the error flag.</p><aside class="m-note m-default"><h4>Since</h4><p>0.1.0</p></aside>
                  </td>
                </tr>
                <tr>
                  <td><a href="#gga4d8fe46958d2c537f0c9eae71897bc1da4fcc43a166e27bb6ec161eded042e36a" class="m-dox-self" name="gga4d8fe46958d2c537f0c9eae71897bc1da4fcc43a166e27bb6ec161eded042e36a">GEAR_INVALID_STATE</a></td>
                  <td>
                  <p>An invalid state was used.</p>
<p>A state can only be used for functions it was initialized for. That means if you initialize a gear_state with only compiler support, then you cannot call runtime functions on it.</p><aside class="m-note m-default m-see"><h4>See also</h4><p><a href="group__state__management.html#ga729addebc180aa7a27b5320a486c3582" class="m-dox">gear_<wbr />new</a></p><p><a href="group__state__management.html#ga965a835ceb2f179a6f9199f2f7551848" class="m-dox">gear_<wbr />new_<wbr />runtime</a></p><p><a href="group__state__management.html#ga7138dba491951b53ec8324e866e42f1f" class="m-dox">gear_<wbr />new_<wbr />compiler</a></p></aside><aside class="m-note m-default"><h4>Since</h4><p>0.1.0</p></aside>
                  </td>
                </tr>
                <tr>
                  <td><a href="#gga4d8fe46958d2c537f0c9eae71897bc1dadbf18c0ae74bf3c0c312ab9165b356c5" class="m-dox-self" name="gga4d8fe46958d2c537f0c9eae71897bc1dadbf18c0ae74bf3c0c312ab9165b356c5">GEAR_STACK_OVERFLOW</a></td>
                  <td>
                  <p>A stack overflow occured.</p>
<p>Too many local scopes were pushed on with</p><aside class="m-note m-default m-see"><h4>See also</h4><p><a href="group__variable__api.html#ga615095b6a4acb9198ea7d528ce692689" class="m-dox">gear_<wbr />push_<wbr />local_<wbr />scope</a>. The maximum number of local scopes is undefined.</p><p><a href="group__variable__api.html#ga615095b6a4acb9198ea7d528ce692689" class="m-dox">gear_<wbr />push_<wbr />local_<wbr />scope</a></p></aside><aside class="m-note m-default"><h4>Since</h4><p>0.1.0</p></aside>
                  </td>
                </tr>
                <tr>
                  <td><a href="#gga4d8fe46958d2c537f0c9eae71897bc1da4da3d14affcddc99727a0f42ba44ae71" class="m-dox-self" name="gga4d8fe46958d2c537f0c9eae71897bc1da4da3d14affcddc99727a0f42ba44ae71">GEAR_STACK_UNDERFLOW</a></td>
                  <td>
                  <p>A stack underflow occured.</p>
<p>This error occurs if</p><aside class="m-note m-default m-see"><h4>See also</h4><p><a href="group__variable__api.html#gab0f97bff50484d15097864a53535c92f" class="m-dox">gear_<wbr />pop_<wbr />local_<wbr />scope</a> is called on an empty scope stack.</p><p><a href="group__variable__api.html#gab0f97bff50484d15097864a53535c92f" class="m-dox">gear_<wbr />pop_<wbr />local_<wbr />scope</a></p></aside><aside class="m-note m-default"><h4>Since</h4><p>0.1.0</p></aside>
                  </td>
                </tr>
                <tr>
                  <td><a href="#gga4d8fe46958d2c537f0c9eae71897bc1dabbe46646b7c5ac3f6337c872c81aff5f" class="m-dox-self" name="gga4d8fe46958d2c537f0c9eae71897bc1dabbe46646b7c5ac3f6337c872c81aff5f">GEAR_OUT_OF_MEMORY</a></td>
                  <td>
                  <p>The system has run out of memory.</p>
<p>This could happen if the OS ran out of memory, or more likely, the custom <em>realloc</em> memory function returned NULL.</p><aside class="m-note m-default m-see"><h4>See also</h4><p><a href="group__state__management.html#gaaf5783e79c6a62fb7ba542e7b029f133" class="m-dox">gear_<wbr />function_<wbr />realloc</a></p></aside><aside class="m-note m-default"><h4>Since</h4><p>0.1.0</p></aside>
                  </td>
                </tr>
                <tr>
                  <td><a href="#gga4d8fe46958d2c537f0c9eae71897bc1da86a4772d5de0cd6a0b3a926e4aed08d3" class="m-dox-self" name="gga4d8fe46958d2c537f0c9eae71897bc1da86a4772d5de0cd6a0b3a926e4aed08d3">GEAR_OUT_OF_RANGE</a></td>
                  <td>
                  <p>An attempt was made to access an index out of bounds.</p>
<aside class="m-note m-default"><h4>Since</h4><p>0.2.1</p></aside>
                  </td>
                </tr>
                <tr>
                  <td><a href="#gga4d8fe46958d2c537f0c9eae71897bc1da9ce9b4eb482dfeb1370e0753ab65ccdb" class="m-dox-self" name="gga4d8fe46958d2c537f0c9eae71897bc1da9ce9b4eb482dfeb1370e0753ab65ccdb">GEAR_COMPILATION_ERROR</a></td>
                  <td>
                  <p>An error occurred while compiling Gear code.</p>
<aside class="m-note m-default"><h4>Since</h4><p>0.1.0</p></aside>
                  </td>
                </tr>
                <tr>
                  <td><a href="#gga4d8fe46958d2c537f0c9eae71897bc1daf8a99a4ee6f78b2c85aa8c6c76fc0365" class="m-dox-self" name="gga4d8fe46958d2c537f0c9eae71897bc1daf8a99a4ee6f78b2c85aa8c6c76fc0365">GEAR_RUNTIME_ERROR</a></td>
                  <td>
                  <p>An error occurred while executing Gear code in the VM.</p>
<aside class="m-note m-default"><h4>Since</h4><p>0.1.0</p></aside>
                  </td>
                </tr>
              </tbody>
            </table>
          </div></section>
        </section>
        <section>
          <h2>Typedef documentation</h2>
          <section class="m-dox-details" id="gadfaf302467610666a8f370f90d4b2c9f"><div>
            <h3>
              typedef struct <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a> <a href="#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox-self">gear_state</a>
            </h3>
            <p>The Gear state manages all data pertaining to interactions with the library.</p>
<p>You can create as many Gear states as you want, however, a state should only be used on the thread that created it.</p><p>All public API operations require a pointer to a <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>.</p><aside class="m-note m-default m-see"><h4>See also</h4><p><a href="group__state__management.html#ga729addebc180aa7a27b5320a486c3582" class="m-dox">gear_<wbr />new</a></p><p><a href="group__state__management.html#gaabe544d3fe58d489dbf47c13dd1389f6" class="m-dox">gear_<wbr />delete</a></p></aside>
          </div></section>
          <section class="m-dox-details" id="gaaf5783e79c6a62fb7ba542e7b029f133"><div>
            <h3>
              typedef void*(*<a href="#gaaf5783e79c6a62fb7ba542e7b029f133" class="m-dox-self">gear_function_realloc</a>)(void*user_ptr, void*ptr, unsigned int size)
            </h3>
            <p>This function should behave exactly like the C function <strong>realloc</strong>.</p>
<p>Gear will gracefully fail if NULL is returned. The public API function that triggered the allocation failure will return <a href="group__state__management.html#gga4d8fe46958d2c537f0c9eae71897bc1dabbe46646b7c5ac3f6337c872c81aff5f" class="m-dox">GEAR_<wbr />OUT_<wbr />OF_<wbr />MEMORY</a>.</p><pre class="m-code"><span class="kt">void</span> <span class="o">*</span><span class="nf">example_realloc</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">user_ptr</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">ptr</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">size</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="n">realloc</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span> <span class="n">size</span><span class="p">);</span>
<span class="p">}</span></pre>
          </div></section>
          <section class="m-dox-details" id="ga270407bb29be554bf454c9b1d7cb8ba8"><div>
            <h3>
              typedef void(*<a href="#ga270407bb29be554bf454c9b1d7cb8ba8" class="m-dox-self">gear_function_free</a>)(void*user_ptr, void*ptr)
            </h3>
            <p>This function should behave exactly like the C function <strong>free</strong>.</p>
<pre class="m-code"><span class="kt">void</span> <span class="nf">example_free</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">user_ptr</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">ptr</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">free</span><span class="p">(</span><span class="n">ptr</span><span class="p">);</span>
<span class="p">}</span></pre>
          </div></section>
          <section class="m-dox-details" id="gad355f8189daf3acbefe8f260ab5dc881"><div>
            <h3>
              typedef void(*<a href="#gad355f8189daf3acbefe8f260ab5dc881" class="m-dox-self">gear_function_print</a>)(void*user_ptr, const char*str)
            </h3>
            <p>Print function callback.</p>
<p>This is invoked whenever the Gear function <strong>print</strong> or <strong>println</strong> is used. If this is not provided, then an implementation writing to stdout is used. The implementation should <em>not</em> add a new line. New lines will be added to <strong>str</strong> by the caller.</p><pre class="m-code"><span class="kt">void</span> <span class="nf">example_print</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">user_ptr</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// fputs is used because it does not emit a new line like puts</span>
    <span class="c1">// and does not spend time with formatting like printf.</span>
    <span class="n">fputs</span><span class="p">(</span><span class="n">str</span><span class="p">,</span> <span class="n">stdout</span><span class="p">);</span>
<span class="p">}</span></pre>
          </div></section>
          <section class="m-dox-details" id="gae2b2ae34ee8a632ad0adb8370e0b7889"><div>
            <h3>
              typedef void(*<a href="#gae2b2ae34ee8a632ad0adb8370e0b7889" class="m-dox-self">gear_function_error</a>)(void*user_ptr, const char*function, const char*file, int line, const char*msg)
            </h3>
            <p>Callback to be invoked when something goes wrong. A breakpoint can be placed inside the callback and then the trace examined. This can help aid in debugging.</p>
<pre class="m-code"><span class="kt">void</span> <span class="nf">example_error</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="n">user_ptr</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">function</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">file</span><span class="p">,</span> <span class="kt">int</span> <span class="n">line</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">msg</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s">&quot;(%s) line:%d function:%s msg:</span><span class="se">\&quot;</span><span class="s">%s</span><span class="se">\&quot;\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="n">msg</span><span class="p">);</span>
<span class="p">}</span></pre>
          </div></section>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-dox-details" id="ga729addebc180aa7a27b5320a486c3582"><div>
            <h3>
              <span class="m-dox-wrap-bumper"> <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>* </span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#ga729addebc180aa7a27b5320a486c3582" class="m-dox-self">gear_new</a>(</span><span class="m-dox-wrap">void)</span></span>
            </h3>
            <p>Allocates a new <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>A heap allocated <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>. The state must be released with <a href="group__state__management.html#gaabe544d3fe58d489dbf47c13dd1389f6" class="m-dox">gear_<wbr />delete</a>.</td>
                </tr>
              </tfoot>
            </table>
<aside class="m-note m-default m-see"><h4>See also</h4><p><a class="m-dox" href="group__state__management.html#gaabe544d3fe58d489dbf47c13dd1389f6">gear_<wbr/>delete</a></p></aside><aside class="m-note m-default"><h4>Since</h4><p>0.1.0</p></aside>
          </div></section>
          <section class="m-dox-details" id="ga965a835ceb2f179a6f9199f2f7551848"><div>
            <h3>
              <span class="m-dox-wrap-bumper"> <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>* </span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#ga965a835ceb2f179a6f9199f2f7551848" class="m-dox-self">gear_new_runtime</a>(</span><span class="m-dox-wrap">void)</span></span>
            </h3>
            <p>Allocates a new <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a> with only runtime capabilities.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>A heap allocated <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>. The state must be released with <a href="group__state__management.html#gaabe544d3fe58d489dbf47c13dd1389f6" class="m-dox">gear_<wbr />delete</a>.</td>
                </tr>
              </tfoot>
            </table>
<aside class="m-note m-default m-see"><h4>See also</h4><p><a class="m-dox" href="group__state__management.html#gaabe544d3fe58d489dbf47c13dd1389f6">gear_<wbr/>delete</a></p></aside><aside class="m-note m-default"><h4>Since</h4><p>0.1.0</p></aside>
          </div></section>
          <section class="m-dox-details" id="ga7138dba491951b53ec8324e866e42f1f"><div>
            <h3>
              <span class="m-dox-wrap-bumper"> <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>* </span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#ga7138dba491951b53ec8324e866e42f1f" class="m-dox-self">gear_new_compiler</a>(</span><span class="m-dox-wrap">void)</span></span>
            </h3>
            <p>Allocates a new <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a> with only compiler capabilities.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>A heap allocated <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>. The state must be released with <a href="group__state__management.html#gaabe544d3fe58d489dbf47c13dd1389f6" class="m-dox">gear_<wbr />delete</a>.</td>
                </tr>
              </tfoot>
            </table>
<aside class="m-note m-default m-see"><h4>See also</h4><p><a class="m-dox" href="group__state__management.html#gaabe544d3fe58d489dbf47c13dd1389f6">gear_<wbr/>delete</a></p></aside><aside class="m-note m-default"><h4>Since</h4><p>0.1.0</p></aside>
          </div></section>
          <section class="m-dox-details" id="ga096704d7bd507dd7664631a3fbb40d9b"><div>
            <h3>
              <span class="m-dox-wrap-bumper"> <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>* </span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#ga096704d7bd507dd7664631a3fbb40d9b" class="m-dox-self">gear_new_ex</a>(</span><span class="m-dox-wrap">const <a href="structgear__host.html" class="m-dox">gear_<wbr />host</a>* host)</span></span>
            </h3>
            <p>The extended form of the <a href="group__state__management.html#ga729addebc180aa7a27b5320a486c3582" class="m-dox">gear_<wbr />new</a> function.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">host&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>A structure containing host configurations.<br /><br />The contents of this structure are copied to the gear state and do not need to be retained by the caller. Modifying the structure after calling this function will have no effect.<br /><br />The memory for the structure is owned by the caller.</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>A heap allocated <a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>. The state must be released with <a href="group__state__management.html#gaabe544d3fe58d489dbf47c13dd1389f6" class="m-dox">gear_<wbr />delete</a>.</td>
                </tr>
              </tfoot>
            </table>
<p>This version allows the host to customize their configuration.</p><aside class="m-note m-default"><h4>Since</h4><p>0.1.0</p></aside><aside class="m-note m-default m-see"><h4>See also</h4><p><a class="m-dox" href="group__state__management.html#gaabe544d3fe58d489dbf47c13dd1389f6">gear_<wbr/>delete</a></p></aside>
          </div></section>
          <section class="m-dox-details" id="gaabe544d3fe58d489dbf47c13dd1389f6"><div>
            <h3>
              <span class="m-dox-wrap-bumper"> void </span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#gaabe544d3fe58d489dbf47c13dd1389f6" class="m-dox-self">gear_delete</a>(</span><span class="m-dox-wrap"><a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>* state)</span></span>
            </h3>
            <p>Releases resources associated with a gear state.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>The gear state to close. This state should have been generated by gear_new or gear_new_ex.</td>
                </tr>
              </tbody>
            </table>
<p>Once a gear state has been closed it should not be used again.</p><aside class="m-note m-default"><h4>Since</h4><p>0.1.0</p></aside><aside class="m-note m-default m-see"><h4>See also</h4><p><a class="m-dox" href="group__state__management.html#ga729addebc180aa7a27b5320a486c3582">gear_<wbr/>new</a></p><p><a class="m-dox" href="group__state__management.html#ga096704d7bd507dd7664631a3fbb40d9b">gear_<wbr/>new_<wbr/>ex</a></p></aside>
          </div></section>
          <section class="m-dox-details" id="gac6693516e7b33c0a6bc031cc607edb26"><div>
            <h3>
              <span class="m-dox-wrap-bumper"> <a href="group__state__management.html#ga4d8fe46958d2c537f0c9eae71897bc1d" class="m-dox">gear_<wbr />code</a> </span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#gac6693516e7b33c0a6bc031cc607edb26" class="m-dox-self">gear_err</a>(</span><span class="m-dox-wrap"><a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>* state)</span></span>
            </h3>
            <p>Returns the error code of the last function call.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>The gear state.</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>The last error code or <a href="group__state__management.html#gga4d8fe46958d2c537f0c9eae71897bc1da4acfa97ef05b5809519d5ff9f36323c8" class="m-dox">GEAR_<wbr />OK</a> if there was no error.</td>
                </tr>
              </tfoot>
            </table>
<p>Calling a public API function immediately resets the last error code to <a class="m-dox" href="group__state__management.html#gga4d8fe46958d2c537f0c9eae71897bc1da4acfa97ef05b5809519d5ff9f36323c8">GEAR_<wbr/>OK</a>. The only functions excluded from this rule are <a class="m-dox" href="group__state__management.html#gac6693516e7b33c0a6bc031cc607edb26">gear_<wbr/>err</a> and <a class="m-dox" href="group__state__management.html#gadbc829d88f674fce8e7ebe097de49a04">gear_<wbr/>errmsg</a>.</p><aside class="m-note m-default m-see"><h4>See also</h4><p><a class="m-dox" href="group__state__management.html#gadbc829d88f674fce8e7ebe097de49a04">gear_<wbr/>errmsg</a></p></aside><aside class="m-note m-default"><h4>Since</h4><p>0.1.0</p></aside>
          </div></section>
          <section class="m-dox-details" id="gadbc829d88f674fce8e7ebe097de49a04"><div>
            <h3>
              <span class="m-dox-wrap-bumper"> const char* </span><span class="m-dox-wrap"><span class="m-dox-wrap-bumper"><a href="#gadbc829d88f674fce8e7ebe097de49a04" class="m-dox-self">gear_errmsg</a>(</span><span class="m-dox-wrap"><a href="group__state__management.html#gadfaf302467610666a8f370f90d4b2c9f" class="m-dox">gear_<wbr />state</a>* state)</span></span>
            </h3>
            <p>Returns a description of the last error from the last function call.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">state&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>The gear state.</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>A string describing the last error that occurred or an empty string.</td>
                </tr>
              </tfoot>
            </table>
<p>The resulting string is owned by Gear and should <em>not</em> be free'd by the caller. The string should not be considered valid between function calls; it is recommended to use or copy it immediately.</p><aside class="m-note m-default m-see"><h4>See also</h4><p><a class="m-dox" href="group__state__management.html#gac6693516e7b33c0a6bc031cc607edb26">gear_<wbr/>err</a></p></aside><aside class="m-note m-default"><h4>Since</h4><p>0.1.0</p></aside>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-dox-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-dox-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-dox-search-content">
          <input type="search" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" />
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            Search for symbols, directories, files, pages or modules. You can omit any
            prefix from the symbol or file path; adding a <code>:</code> or <code>/</code>
            suffix lists all members of given symbol or directory. Navigate through the
            list using <span class="m-label m-dim">&darr;</span> and
            <span class="m-label m-dim">&uarr;</span>, press
            <span class="m-label m-dim">Enter</span> to go.
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search.js"></script>
<script src="searchdata.js" async="async"></script>
<!--
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Gear C API Documentation. Created by <a href="http://doxygen.org/">Doxygen</a> 1.8.14 and <a href="http://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
-->
</body>
</html>